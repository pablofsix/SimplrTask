(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{2521:(e,t,a)=>{Promise.resolve().then(a.bind(a,7146))},7146:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>eu});var s=a(5155),r=a(2115),n=a(7481),i=a(514),l=a(85),o=a(6424),c=a(1754),d=a(3934);function m(e){let{tasks:t,projectName:a,onTaskAdd:r,onTaskUpdate:n,onTaskDelete:i,onTaskHistoryView:l,onTaskStatusUpdate:m}=e;return(0,s.jsxs)("main",{className:"flex-1 flex flex-col p-4 md:p-6 lg:p-8 w-full bg-white rounded-b-lg overflow-hidden",children:[(0,s.jsx)("div",{className:"mb-4",children:(0,s.jsx)(c.e,{projectName:a,onTaskAdd:r})}),(0,s.jsx)(o.F,{className:"flex-1 -mx-4 px-4",children:(0,s.jsx)("div",{className:"space-y-0 pb-4",children:t.length>0?t.map(e=>(0,s.jsx)(d.L,{task:e,onHistoryClick:l,onUpdate:n,onDelete:i,onStatusUpdate:m},e.id)):(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"No tasks yet!"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Add a task above to get started."})]})})})]})}var x=a(4729),p=a(8184),u=a(4165),h=a(6695),j=a(6126),f=a(9434);let g=r.forwardRef((e,t)=>{let{className:a,type:r,...n}=e;return(0,s.jsx)("input",{type:r,className:(0,f.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",a),ref:t,...n})});g.displayName="Input";var v=a(285),N=a(8603),w=a(5943),y=a(8376),b=a(9968),k=a(7223),C=a(593),A=a(6923),E=a(8718);let S=e=>(0,p.GP)(e,"dd/MM/yy HH:mm"),T=e=>e?"...".concat(e.slice(-4)):null,L=e=>{let t=T(e.taskId);switch(e.type){case"created":return{icon:(0,s.jsx)(N.A,{className:"h-4 w-4 text-green-500"}),title:(0,s.jsxs)("p",{className:"font-medium",children:["Task Created: ",(0,s.jsxs)("span",{className:"font-normal text-muted-foreground",children:['"',e.taskContent,'"']})]}),description:t&&(0,s.jsx)(j.E,{variant:"outline",className:"font-mono",children:t})};case"content":return{icon:(0,s.jsx)(w.A,{className:"h-4 w-4 text-blue-500"}),title:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("p",{className:"font-medium",children:"Task Updated"}),t&&(0,s.jsx)(j.E,{variant:"outline",className:"font-mono",children:t})]}),description:(0,s.jsxs)("p",{className:"text-sm text-muted-foreground break-words whitespace-pre-wrap",children:["Changed from ",(0,s.jsxs)("span",{className:"line-through",children:['"',e.from,'"']})," to ",(0,s.jsxs)("span",{children:['"',e.to,'"']})]})};case"status":return{icon:(0,s.jsx)(y.A,{className:"h-4 w-4 text-purple-500"}),title:(0,s.jsxs)("p",{className:"font-medium",children:["Status Changed for: ",(0,s.jsxs)("span",{className:"font-normal text-muted-foreground",children:['"',e.taskContent,'"']})]}),description:(0,s.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,s.jsx)(j.E,{variant:"outline",children:e.from}),(0,s.jsx)(b.A,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsx)(j.E,{variant:"outline",children:e.to}),t&&(0,s.jsx)(j.E,{variant:"outline",className:"font-mono",children:t})]})};case"deleted":return{icon:(0,s.jsx)(k.A,{className:"h-4 w-4 text-red-500"}),title:(0,s.jsxs)("p",{className:"font-medium",children:["Task Deleted: ",(0,s.jsxs)("span",{className:"font-normal text-muted-foreground line-through",children:['"',e.taskContent,'"']})]}),description:t&&(0,s.jsx)(j.E,{variant:"outline",className:"font-mono",children:t})};case"reported":return{icon:(0,s.jsx)(C.A,{className:"h-4 w-4 text-gray-500"}),title:(0,s.jsxs)("p",{className:"font-medium",children:["Task Reported: ",(0,s.jsxs)("span",{className:"font-normal text-muted-foreground",children:['"',e.taskContent,'"']})]}),description:t&&(0,s.jsx)(j.E,{variant:"outline",className:"font-mono",children:t})};default:return{icon:null,title:null,description:null}}};function I(e){let{isOpen:t,setIsOpen:a,activity:i=[],onActivityImport:l}=e,{toast:c}=(0,n.dj)(),[d,m]=(0,r.useState)(""),x=(0,r.useRef)(null),j=(0,r.useMemo)(()=>{if(!d)return i;let e=d.toLowerCase();return i.filter(t=>{var a,s,r;let n=S(new Date(t.timestamp)).toLowerCase(),i=t.type.toLowerCase(),l=t.taskContent.toLowerCase(),o=null==(a=t.from)?void 0:a.toLowerCase(),c=null==(s=t.to)?void 0:s.toLowerCase(),d=null==(r=t.taskId)?void 0:r.toLowerCase();return n.includes(e)||i.includes(e)||l.includes(e)||o&&o.includes(e)||c&&c.includes(e)||d&&d.includes(e)})},[d,i]);return(0,s.jsx)(u.lG,{open:t,onOpenChange:a,children:(0,s.jsxs)(u.Cf,{className:"max-w-3xl",children:[(0,s.jsxs)(u.c7,{children:[(0,s.jsx)(u.L3,{children:"Global Activity"}),(0,s.jsx)(u.rr,{children:"A log of all activities across the project."})]}),(0,s.jsx)("div",{className:"my-2",children:(0,s.jsx)(g,{placeholder:"Search activity by keyword or date...",value:d,onChange:e=>m(e.target.value)})}),(0,s.jsx)(o.F,{className:"max-h-[60vh] -mx-6 px-6",children:(0,s.jsx)("div",{className:"space-y-4 py-4",children:j.length>0?[...j].sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()).map(e=>{let{icon:t,title:a,description:r}=L(e);return(0,s.jsx)(h.Zp,{className:"p-4 bg-muted/50",children:(0,s.jsxs)("div",{className:"flex items-start gap-4",children:[(0,s.jsx)("div",{className:"mt-1",children:t}),(0,s.jsxs)("div",{className:"flex-1",children:[(0,s.jsxs)("div",{className:"flex justify-between items-start",children:[(0,s.jsx)("div",{className:"flex-1",children:a}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground mb-1 ml-4 flex-shrink-0",children:S(new Date(e.timestamp))})]}),r&&(0,s.jsx)("div",{className:"mt-1",children:r})]})]})},e.id)}):(0,s.jsx)("p",{className:"text-sm text-muted-foreground text-center py-12",children:d?"No activity found for your search.":"No activity has been recorded yet."})})}),(0,s.jsxs)(u.Es,{className:"gap-2",children:[(0,s.jsx)("input",{type:"file",accept:".json",ref:x,onChange:e=>{var t;let s=null==(t=e.target.files)?void 0:t[0];if(!s)return;let r=new FileReader;r.onload=e=>{try{var t;let s=null==(t=e.target)?void 0:t.result;if("string"!=typeof s)throw Error("File could not be read.");let r=JSON.parse(s);if(!Array.isArray(r)||!r.every(e=>"id"in e&&"timestamp"in e&&"type"in e&&"taskContent"in e))throw Error("Invalid activity file format. The 'taskId' property might be missing in some entries.");l(r),c({title:"Success",description:"Activity log merged successfully."}),a(!1)}catch(e){console.error("Failed to import activity log:",e),c({title:"Import Failed",description:e instanceof Error?e.message:"An unknown error occurred.",variant:"destructive"})}},r.onerror=()=>{c({title:"Error",description:"Failed to read the file.",variant:"destructive"})},r.readAsText(s),e.target&&(e.target.value="")},className:"hidden"}),(0,s.jsxs)(v.$,{variant:"outline",onClick:()=>{var e;null==(e=x.current)||e.click()},children:[(0,s.jsx)(A.A,{className:"mr-2 h-4 w-4"}),"Importar desde JSON"]}),(0,s.jsxs)(v.$,{variant:"outline",onClick:()=>{if(0===i.length)return;let e="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify([...i].sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()),null,2)),t="activity_log_".concat((0,p.GP)(new Date,"yyyy-MM-dd"),".json"),a=document.createElement("a");a.setAttribute("href",e),a.setAttribute("download",t),a.click()},disabled:0===i.length,children:[(0,s.jsx)(E.A,{className:"mr-2 h-4 w-4"}),"Exportar como JSON"]})]})]})})}var P=a(968);let D=(0,a(2085).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),R=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(P.b,{ref:t,className:(0,f.cn)(D(),a),...r})});R.displayName=P.b.displayName;var z=a(4059),F=a(154);let O=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(z.bL,{className:(0,f.cn)("grid gap-2",a),...r,ref:t})});O.displayName=z.bL.displayName;let $=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(z.q7,{ref:t,className:(0,f.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",a),...r,children:(0,s.jsx)(z.C1,{className:"flex items-center justify-center",children:(0,s.jsx)(F.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});$.displayName=z.q7.displayName;var U=a(7489);let _=r.forwardRef((e,t)=>{let{className:a,orientation:r="horizontal",decorative:n=!0,...i}=e;return(0,s.jsx)(U.b,{ref:t,decorative:n,orientation:r,className:(0,f.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",a),...i})});function H(e){let{isOpen:t,setIsOpen:a,settings:n,onSettingsSave:i}=e,[l,o]=(0,r.useState)(n.copyFormat),[c,d]=(0,r.useState)(n.statusColors);(0,r.useEffect)(()=>{t&&(o(n.copyFormat),d(n.statusColors))},[t,n]);let m=(e,t)=>{d(a=>({...a,[e]:t}))};return(0,s.jsx)(u.lG,{open:t,onOpenChange:a,children:(0,s.jsxs)(u.Cf,{className:"max-w-md",children:[(0,s.jsxs)(u.c7,{children:[(0,s.jsx)(u.L3,{children:"Configuraci\xf3n"}),(0,s.jsx)(u.rr,{children:"Personaliza el comportamiento de la aplicaci\xf3n."})]}),(0,s.jsxs)("div",{className:"py-4 space-y-6",children:[(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium",children:"Formato de Copiado de Tareas"}),(0,s.jsxs)(O,{value:l,onValueChange:e=>o(e),children:[(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)($,{value:"text",id:"text"}),(0,s.jsx)(R,{htmlFor:"text",children:"Texto plano"})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground ml-6",children:"Ideal para pegar en editores simples o donde no se necesita formato."}),(0,s.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,s.jsx)($,{value:"html",id:"html"}),(0,s.jsx)(R,{htmlFor:"html",children:"Texto enriquecido (HTML)"})]}),(0,s.jsx)("p",{className:"text-xs text-muted-foreground ml-6",children:"Mantiene colores y negrita. Ideal para Teams, Word, o Google Docs."})]})]}),(0,s.jsx)(_,{}),(0,s.jsxs)("div",{className:"space-y-4",children:[(0,s.jsx)("h3",{className:"text-sm font-medium",children:"Colores de Estado para Copiado HTML"}),(0,s.jsx)("div",{className:"space-y-2",children:Object.keys(c).map(e=>(0,s.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,s.jsx)(R,{htmlFor:"color-".concat(e),children:e}),(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(g,{id:"color-".concat(e),type:"color",value:c[e],onChange:t=>m(e,t.target.value),className:"w-10 h-10 p-1"}),(0,s.jsx)(g,{value:c[e],onChange:t=>m(e,t.target.value),className:"w-24 font-mono text-sm"})]})]},e))})]})]}),(0,s.jsxs)(u.Es,{children:[(0,s.jsx)(v.$,{variant:"outline",onClick:()=>a(!1),children:"Cancelar"}),(0,s.jsx)(v.$,{onClick:()=>{i({copyFormat:l,statusColors:c}),a(!1)},children:"Guardar Cambios"})]})]})})}_.displayName=U.b.displayName;var M=a(4301),q=a(172),G=a(518),J=a(5318),V=a(1887),Z=a(8271),B=a(207),Y=a(478),K=a(2413),W=a(8082);let Q=W.Kq,X=W.bL,ee=W.l9,et=r.forwardRef((e,t)=>{let{className:a,sideOffset:r=4,...n}=e;return(0,s.jsx)(W.UC,{ref:t,sideOffset:r,className:(0,f.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a),...n})});et.displayName=W.UC.displayName;var ea=a(4838),es=a(2278);let er=es.bL;es.l9;let en=es.ZL,ei=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(es.hJ,{className:(0,f.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",a),...r,ref:t})});ei.displayName=es.hJ.displayName;let el=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsxs)(en,{children:[(0,s.jsx)(ei,{}),(0,s.jsx)(es.UC,{ref:t,className:(0,f.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",a),...r})]})});el.displayName=es.UC.displayName;let eo=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,f.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...a})};eo.displayName="AlertDialogHeader";let ec=e=>{let{className:t,...a}=e;return(0,s.jsx)("div",{className:(0,f.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...a})};ec.displayName="AlertDialogFooter";let ed=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(es.hE,{ref:t,className:(0,f.cn)("text-lg font-semibold",a),...r})});ed.displayName=es.hE.displayName;let em=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(es.VY,{ref:t,className:(0,f.cn)("text-sm text-muted-foreground",a),...r})});em.displayName=es.VY.displayName;let ex=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(es.rc,{ref:t,className:(0,f.cn)((0,v.r)(),a),...r})});ex.displayName=es.rc.displayName;let ep=r.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(es.ZD,{ref:t,className:(0,f.cn)((0,v.r)({variant:"outline"}),"mt-2 sm:mt-0",a),...r})});function eu(){let{toast:e}=(0,n.dj)(),[t,a]=(0,r.useState)(null),[o,c]=(0,r.useState)(!1),[d,p]=(0,r.useState)(""),[u,h]=(0,r.useState)(null),[j,f]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),[y,b]=(0,r.useState)(!1),[A,E]=(0,r.useState)(!1),[S,T]=(0,r.useState)(!1),[L,P]=(0,r.useState)(""),D=null==t?void 0:t.projects.find(e=>e.id===t.activeProjectId),R=function(e,t){let a=(0,r.useCallback)(e=>{t(e),(0,i.ZL)(e)},[t]),s=(0,r.useCallback)(t=>{if(!e||!t.trim())return;let s={id:"proj-".concat(Date.now()),name:t.trim(),tasks:[],activity:[]},r=[...e.projects,s];a({...e,projects:r})},[e,a]),n=(0,r.useCallback)(t=>{var s;if(!e)return;let r=e.projects.filter(e=>e.id!==t),n=e.activeProjectId===t?(null==(s=r[0])?void 0:s.id)||null:e.activeProjectId;a({...e,projects:r,activeProjectId:n})},[e,a]);return{createProject:s,deleteProject:n,setActiveProject:(0,r.useCallback)(t=>{e&&a({...e,activeProjectId:t})},[e,a]),renameProject:(0,r.useCallback)((t,s)=>{if(!e||!s.trim())return;let r=e.projects.map(e=>e.id===t?{...e,name:s.trim()}:e);a({...e,projects:r})},[e,a])}}(t,a),z=(0,l.I)(t,D||null,a);(0,r.useEffect)(()=>{a((0,i.Y2)());let e=e=>{"app-data"===e.key&&a((0,i.Y2)())};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[]),(0,r.useEffect)(()=>{D&&p(D.name)},[D]);let F=e=>{a(e),(0,i.ZL)(e)},O=()=>{d.trim()&&D&&t&&R.renameProject(D.id,d.trim()),c(!1)},$=(e,t)=>{let a=e.map(e=>"".concat("Listo"===e.status?"[x]":"[ ]"," ").concat(e.content," -> ").concat(e.status.toUpperCase())).join("\n"),s="".concat(t,"\n\n").concat(a);return navigator.clipboard.writeText(s)},U=(e,t,a)=>{let{statusColors:s}=a,r=e.map(e=>{let t="Listo"===e.status?"<b>[x]</b>":"[ ]",a=e.content,r='<b style="color: '.concat(s[e.status],';">').concat(e.status.toUpperCase(),"</b>");return"<p>".concat(t," ").concat(a," -&gt; ").concat(r,"</p>")}).join(""),n=new ClipboardItem({"text/html":new Blob(["\n      <div>\n        <p><b>".concat(t,"</b></p>\n        ").concat(r,"\n      </div>\n    ")],{type:"text/html"})});return navigator.clipboard.write([n])},_=()=>{if(!t)return;let a={id:"project-".concat(Date.now()),name:"Project ".concat(t.projects.length+1),tasks:[],activity:[]};R.createProject(a.name),c(!0),p(a.name),e({title:'Project "'.concat(a.name,'" created')})},W=a=>{if(t&&a!==t.activeProjectId){var s;R.setActiveProject(a),e({title:'Switched to project "'.concat(null==(s=t.projects.find(e=>e.id===a))?void 0:s.name,'"')})}};return t&&D?(0,s.jsxs)("div",{className:"bg-neutral-950 min-h-screen flex flex-col items-center py-8",children:[(0,s.jsxs)("div",{className:"w-full max-w-4xl bg-white rounded-lg shadow-2xl flex flex-col h-[calc(100vh-4rem)]",children:[(0,s.jsx)("header",{className:"w-full flex items-center justify-between p-4 md:p-6 lg:p-8 border-b",children:o?(0,s.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,s.jsx)(g,{value:d,onChange:e=>p(e.target.value),onKeyDown:e=>{"Enter"===e.key&&O(),"Escape"===e.key&&(p((null==D?void 0:D.name)||""),c(!1))},className:"text-3xl font-bold tracking-tight h-auto p-0 border-none focus-visible:ring-0",autoFocus:!0,onFocus:e=>e.currentTarget.select()}),(0,s.jsx)(v.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:O,children:(0,s.jsx)(G.A,{className:"h-5 w-5"})}),(0,s.jsx)(v.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{p(D.name),c(!1)},children:(0,s.jsx)(J.A,{className:"h-5 w-5"})})]}):(0,s.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-foreground cursor-pointer",onClick:()=>{p(D.name),c(!0)},children:D.name}),(0,s.jsxs)(ea.rI,{children:[(0,s.jsx)(ea.ty,{asChild:!0,children:(0,s.jsx)(v.$,{variant:"ghost",size:"icon",children:(0,s.jsx)(V.A,{className:"h-4 w-4"})})}),(0,s.jsxs)(ea.SQ,{align:"start",children:[t.projects.map(e=>(0,s.jsxs)(ea._2,{onSelect:()=>W(e.id),children:[e.name,e.id===t.activeProjectId&&(0,s.jsx)(G.A,{className:"ml-auto h-4 w-4"})]},e.id)),(0,s.jsx)(ea.mB,{}),(0,s.jsxs)(ea._2,{onSelect:_,children:[(0,s.jsx)(M.A,{className:"mr-2 h-4 w-4"}),"A\xf1adir nuevo proyecto"]}),(0,s.jsx)(ea.mB,{}),(0,s.jsxs)(ea._2,{onSelect:()=>T(!0),className:"text-destructive focus:bg-destructive/10 focus:text-destructive",disabled:t.projects.length<=1,children:[(0,s.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Eliminar proyecto"]})]})]})]}),(0,s.jsx)(Q,{children:(0,s.jsxs)("div",{className:"flex items-center gap-1",children:[(0,s.jsxs)(X,{children:[(0,s.jsx)(ee,{asChild:!0,children:(0,s.jsxs)(v.$,{variant:"ghost",size:"icon",onClick:()=>b(!0),children:[(0,s.jsx)(Z.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Configuraci\xf3n"})]})}),(0,s.jsx)(et,{children:(0,s.jsx)("p",{children:"Configuraci\xf3n"})})]}),(0,s.jsxs)(X,{children:[(0,s.jsx)(ee,{asChild:!0,children:(0,s.jsxs)(v.$,{variant:"ghost",size:"icon",onClick:()=>w(!0),children:[(0,s.jsx)(B.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Ver actividad general"})]})}),(0,s.jsx)(et,{children:(0,s.jsx)("p",{children:"Ver actividad general"})})]}),(0,s.jsxs)(X,{children:[(0,s.jsx)(ee,{asChild:!0,children:(0,s.jsxs)(v.$,{variant:"ghost",size:"icon",onClick:()=>{if(!t||!D||0===D.tasks.length)return void e({title:"No hay tareas para copiar",description:"A\xf1ade algunas tareas antes de copiar."});let a={Listo:1,"En proceso":2,Pendiente:3},s=[...D.tasks].sort((e,t)=>a[e.status]-a[t.status]);("html"===t.settings.copyFormat?U(s,D.name,t.settings):$(s,D.name)).then(()=>{e({title:"Tareas copiadas",description:"La lista de tareas ha sido copiada al portapapeles."})}).catch(t=>{console.error("Failed to copy tasks: ",t),e({title:"Error",description:"No se pudieron copiar las tareas.",variant:"destructive"})})},children:[(0,s.jsx)(Y.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Copiar tareas"})]})}),(0,s.jsx)(et,{children:(0,s.jsx)("p",{children:"Copiar lista de tareas"})})]}),(0,s.jsxs)(X,{children:[(0,s.jsx)(ee,{asChild:!0,children:(0,s.jsxs)(v.$,{variant:"ghost",size:"icon",onClick:()=>E(!0),children:[(0,s.jsx)(C.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Informar tareas"})]})}),(0,s.jsx)(et,{children:(0,s.jsx)("p",{children:"Informar tareas (eliminar las completadas)"})})]}),(0,s.jsxs)(X,{children:[(0,s.jsx)(ee,{asChild:!0,children:(0,s.jsxs)(v.$,{variant:"ghost",size:"icon",onClick:()=>{let e=(0,i.vH)(),t=(window.screen.height-400)/2,a=(window.screen.width-600)/2;switch(e){case"top-left":t=0,a=0;break;case"top-right":t=0,a=window.screen.width-600;break;case"bottom-left":t=window.screen.height-400,a=0;break;case"bottom-right":t=window.screen.height-400,a=window.screen.width-600}window.open(function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"/",t=function(){let e=function(){let e=window.location.pathname.split("/").filter(Boolean);return e.length>0&&!e[0].includes(".")?e[0]:""}(),t=window.location.origin;return e?"".concat(t,"/").concat(e):t}(),a=e.startsWith("/")?e:"/".concat(e);return"".concat(t).concat(a)}("/popout"),"task-popout","width=".concat(600,",height=").concat(400,",top=").concat(t,",left=").concat(a))},children:[(0,s.jsx)(K.A,{className:"h-5 w-5"}),(0,s.jsx)("span",{className:"sr-only",children:"Open in new window"})]})}),(0,s.jsx)(et,{children:(0,s.jsx)("p",{children:"Abrir en nueva ventana"})})]})]})})]})}),(0,s.jsx)(m,{tasks:D.tasks,projectName:D.name,onTaskAdd:t=>{""!==t.trim()&&(z.createTask(t.trim())||e({title:"No se pudo agregar la tarea",description:"Hubo un problema al crear la tarea. Reintenta."}))},onTaskUpdate:(t,a)=>{z.updateTask(t,a)||e({title:"No se pudo actualizar la tarea",description:"Revisa los cambios e intenta de nuevo."})},onTaskDelete:t=>{z.deleteTask(t)||e({title:"No se pudo eliminar la tarea",description:"Revisa e intenta de nuevo."})},onTaskHistoryView:e=>{h(e),f(!0)},onTaskStatusUpdate:(t,a)=>{z.updateTaskStatus(t,a)||e({title:"No se pudo actualizar el estado",description:"Revisa e intenta de nuevo."})}})]}),(0,s.jsx)(x.R,{isOpen:j,setIsOpen:f,task:u}),(0,s.jsx)(I,{isOpen:N,setIsOpen:w,activity:D.activity,onActivityImport:e=>{if(!D||!t)return;let a=e.map(e=>({...e,timestamp:new Date(e.timestamp)})),s=new Set(D.activity.map(e=>e.id)),r=[...D.activity];a.forEach(e=>{s.has(e.id)||r.push(e)}),r.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime());let n=t.projects.map(e=>e.id===t.activeProjectId?{...e,activity:r}:e);F({...t,projects:n})}}),(0,s.jsx)(H,{isOpen:y,setIsOpen:b,settings:t.settings,onSettingsSave:a=>{t&&(F({...t,settings:a}),e({title:"Settings saved"}))}}),(0,s.jsx)(er,{open:A,onOpenChange:E,children:(0,s.jsxs)(el,{children:[(0,s.jsxs)(eo,{children:[(0,s.jsx)(ed,{children:"\xbfEst\xe1 seguro?"}),(0,s.jsx)(em,{children:'Esta acci\xf3n eliminar\xe1 permanentemente todas las tareas marcadas como "Listo". Desapareceran las tareas terminadas de la lista.'})]}),(0,s.jsxs)(ec,{children:[(0,s.jsx)(ep,{children:"Cancelar"}),(0,s.jsx)(ex,{onClick:()=>{if(!D||!t)return;let a=D.tasks.filter(e=>"Listo"===e.status);if(0===a.length){e({title:"Sin tareas completadas",description:'No hay tareas "Listo" para eliminar.'}),E(!1);return}let s=D.tasks.filter(e=>"Listo"!==e.status),r=a.map(e=>({id:"act-".concat(Date.now(),"-").concat(e.id),taskId:e.id,timestamp:new Date,type:"reported",taskContent:e.content})),n=t.projects.map(e=>e.id===t.activeProjectId?{...e,tasks:s,activity:[...r,...e.activity]}:e);F({...t,projects:n}),e({title:"Tareas informadas",description:"".concat(a.length," tarea(s) completada(s) ha(n) sido archivada(s).")}),E(!1)},children:"Confirmar"})]})]})}),(0,s.jsx)(er,{open:S,onOpenChange:T,children:(0,s.jsxs)(el,{children:[(0,s.jsxs)(eo,{children:[(0,s.jsxs)(ed,{children:['\xbfEst\xe1 seguro que quiere eliminar el proyecto "',D.name,'"?']}),(0,s.jsxs)(em,{children:["Esta acci\xf3n no se puede deshacer. Se borrar\xe1n permanentemente el proyecto y todas sus tareas y actividades asociadas.",(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"Por favor, escriba ",(0,s.jsx)("strong",{children:"delete"})," para confirmar."]})]}),(0,s.jsx)(g,{value:L,onChange:e=>P(e.target.value),placeholder:"delete",className:"my-2"}),(0,s.jsxs)(ec,{children:[(0,s.jsx)(ep,{onClick:()=>P(""),children:"Cancelar"}),(0,s.jsx)(ex,{onClick:()=>{D&&(R.deleteProject(D.id),e({title:'Project "'.concat(D.name,'" deleted')}),T(!1),P(""))},disabled:"delete"!==L.toLowerCase(),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Eliminar proyecto"})]})]})})]}):(0,s.jsx)("div",{className:"bg-neutral-950 min-h-screen flex flex-col items-center justify-center text-white",children:t&&0===t.projects.length?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("h1",{className:"text-2xl font-bold",children:"No project found"}),(0,s.jsx)("p",{className:"mt-4",children:"Please create a new project to get started."}),(0,s.jsxs)(v.$,{onClick:_,className:"mt-6",children:[(0,s.jsx)(M.A,{className:"mr-2 h-4 w-4"}),"Create New Project"]})]}):(0,s.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,s.jsx)(q.A,{className:"h-5 w-5 animate-spin"}),(0,s.jsx)("span",{children:"Loading projects..."})]})})}ep.displayName=es.ZD.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[965,728,960,579,441,684,358],()=>t(2521)),_N_E=e.O()}]);