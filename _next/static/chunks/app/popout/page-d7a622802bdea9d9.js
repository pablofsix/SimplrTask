(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[658],{485:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>y});var s=a(5155),r=a(2115),n=a(6424),i=a(1754),o=a(3934);function d(e){let{tasks:t,projectName:a,onTaskAdd:r,onTaskUpdate:d,onTaskDelete:l,onTaskHistoryView:c,onTaskStatusUpdate:u}=e;return(0,s.jsxs)("main",{className:"flex-1 flex flex-col w-full bg-white overflow-hidden",children:[(0,s.jsx)("div",{className:"p-4 border-b",children:(0,s.jsx)(i.e,{projectName:a,onTaskAdd:r})}),(0,s.jsx)(n.F,{className:"flex-1",children:(0,s.jsx)("div",{className:"space-y-0 p-4",children:t.length>0?t.map(e=>(0,s.jsx)(o.L,{task:e,onHistoryClick:c,onUpdate:d,onDelete:l,onStatusUpdate:u},e.id)):(0,s.jsxs)("div",{className:"text-center py-16",children:[(0,s.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"No tasks yet!"}),(0,s.jsx)("p",{className:"text-muted-foreground mt-1",children:"Add a task above to get started."})]})})})]})}var l=a(514),c=a(7481),u=a(2558),m=a(4729),f=a(285),p=a(4838),x=a(157);let h=(0,x.A)("MoveUpLeft",[["path",{d:"M5 11V5H11",key:"3q78g9"}],["path",{d:"M5 5L19 19",key:"5zm2fv"}]]),v=(0,x.A)("MoveUpRight",[["path",{d:"M13 5H19V11",key:"1n1gyv"}],["path",{d:"M19 5L5 19",key:"72u4yj"}]]),g=(0,x.A)("MoveDownLeft",[["path",{d:"M11 19H5V13",key:"1akmht"}],["path",{d:"M19 5L5 19",key:"72u4yj"}]]),j=(0,x.A)("MoveDownRight",[["path",{d:"M19 13V19H13",key:"10vkzq"}],["path",{d:"M5 5L19 19",key:"5zm2fv"}]]);var b=a(8271),w=a(9434);function y(){let{toast:e}=(0,c.dj)(),[t,a]=(0,r.useState)(null),[n,i]=(0,r.useState)(null),[o,x]=(0,r.useState)(!1),[y,N]=(0,r.useState)("center");(0,r.useEffect)(()=>{a((0,l.Y2)()),N((0,l.vH)());let e=e=>{"app-data"===e.key&&a((0,l.Y2)()),"popout-position"===e.key&&N((0,l.vH)())};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[]);let k=null==t?void 0:t.projects.find(e=>e.id===t.activeProjectId),A=e=>{a(e),(0,l.ZL)(e)},L=(e,a,s,r,n,i)=>{if(!k||!t)return;let o={id:"act-".concat(Date.now()),taskId:a,timestamp:new Date,type:s,taskContent:r,from:n,to:i},d=e.map(e=>e.id===t.activeProjectId?{...e,activity:[o,...e.activity]}:e);A({...t,projects:d})},M=e=>{if(!k||!t)return;let a=t.projects.map(a=>a.id===t.activeProjectId?{...a,tasks:e}:a);return A({...t,projects:a}),a},D=t=>{(0,l.gA)(t),N(t),e({title:"Popout Position Saved"})},T=[{value:"top-left",label:"Arriba a la izquierda",icon:(0,s.jsx)(h,{className:"h-4 w-4"})},{value:"top-right",label:"Arriba a la derecha",icon:(0,s.jsx)(v,{className:"h-4 w-4"})},{value:"bottom-left",label:"Abajo a la izquierda",icon:(0,s.jsx)(g,{className:"h-4 w-4"})},{value:"bottom-right",label:"Abajo a la derecha",icon:(0,s.jsx)(j,{className:"h-4 w-4"})}];return k?(0,s.jsxs)("div",{className:"bg-white min-h-screen flex flex-col h-screen",children:[(0,s.jsxs)("header",{className:"p-4 flex items-center justify-between border-b",children:[(0,s.jsx)("h2",{className:"text-xl font-bold tracking-tight text-foreground",children:k.name}),(0,s.jsxs)(p.rI,{children:[(0,s.jsx)(p.ty,{asChild:!0,children:(0,s.jsx)(f.$,{variant:"ghost",size:"icon",children:(0,s.jsx)(b.A,{className:"h-5 w-5"})})}),(0,s.jsxs)(p.SQ,{align:"end",children:[(0,s.jsx)("div",{className:"px-2 py-1.5 text-sm font-semibold",children:"Posici\xf3n de la ventana"}),T.map(e=>(0,s.jsx)(p._2,{onSelect:()=>D(e.value),className:(0,w.cn)(y===e.value&&"bg-accent"),children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[e.icon,(0,s.jsx)("span",{children:e.label})]})},e.value))]})]})]}),(0,s.jsx)(d,{tasks:k.tasks,projectName:k.name,onTaskAdd:e=>{if(""===e.trim()||!k)return;let t={id:"task-".concat(Date.now()),content:e,createdAt:new Date,modifications:[],status:"Pendiente"};L(M([t,...k.tasks]),t.id,"created",e)},onTaskUpdate:(a,s)=>{if(!k)return;let r="",n=M(k.tasks.map(e=>{if(e.id===a){if(e.content===s)return e;r=e.content;let t={id:"mod-".concat(Date.now()),taskId:a,timestamp:new Date,type:"content",from:e.content,to:s};return{...e,content:s,modifications:[t,...e.modifications]}}return e}));r&&t&&L(n,a,"content",s,r,s),e({title:"Task Updated"})},onTaskDelete:a=>{if(!k)return;let s=k.tasks.find(e=>e.id===a);if(!s)return;let r=M(k.tasks.filter(e=>e.id!==a));t&&L(r,a,"deleted",s.content),e({title:"Task Deleted"})},onTaskHistoryView:e=>{i(e),x(!0)},onTaskStatusUpdate:(a,s)=>{let r;if(!k)return;let n="",i=M(k.tasks.map(e=>{if(e.id===a&&e.status!==s){n=e.content,r=e.status;let t={id:"mod-".concat(Date.now()),taskId:a,timestamp:new Date,type:"status",from:e.status,to:s};return{...e,status:s,modifications:[t,...e.modifications]}}return e}));r&&t&&L(i,a,"status",n,r,s),e({title:"Task Status Updated"})}}),(0,s.jsx)(m.R,{isOpen:o,setIsOpen:x,task:n}),(0,s.jsx)(u.Toaster,{})]}):(0,s.jsxs)("div",{className:"bg-white min-h-screen flex flex-col items-center justify-center",children:[(0,s.jsx)("h1",{className:"text-lg font-semibold",children:"Esperando la selecci\xf3n de proyecto en la ventana principal..."}),(0,s.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"Los datos se sincronizar\xe1n autom\xe1ticamente."}),(0,s.jsx)(u.Toaster,{})]})}},1800:(e,t,a)=>{Promise.resolve().then(a.bind(a,485))},2558:(e,t,a)=>{"use strict";a.d(t,{Toaster:()=>v});var s=a(5155),r=a(7481),n=a(2115),i=a(6621),o=a(2085),d=a(5318),l=a(9434);let c=i.Kq,u=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.LM,{ref:t,className:(0,l.cn)("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",a),...r})});u.displayName=i.LM.displayName;let m=(0,o.F)("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),f=n.forwardRef((e,t)=>{let{className:a,variant:r,...n}=e;return(0,s.jsx)(i.bL,{ref:t,className:(0,l.cn)(m({variant:r}),a),...n})});f.displayName=i.bL.displayName,n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.rc,{ref:t,className:(0,l.cn)("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",a),...r})}).displayName=i.rc.displayName;let p=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.bm,{ref:t,className:(0,l.cn)("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",a),"toast-close":"",...r,children:(0,s.jsx)(d.A,{className:"h-4 w-4"})})});p.displayName=i.bm.displayName;let x=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.hE,{ref:t,className:(0,l.cn)("text-sm font-semibold",a),...r})});x.displayName=i.hE.displayName;let h=n.forwardRef((e,t)=>{let{className:a,...r}=e;return(0,s.jsx)(i.VY,{ref:t,className:(0,l.cn)("text-sm opacity-90",a),...r})});function v(){let{toasts:e}=(0,r.dj)();return(0,s.jsxs)(c,{children:[e.map(function(e){let{id:t,title:a,description:r,action:n,...i}=e;return(0,s.jsxs)(f,{...i,children:[(0,s.jsxs)("div",{className:"grid gap-1",children:[a&&(0,s.jsx)(x,{children:a}),r&&(0,s.jsx)(h,{children:r})]}),n,(0,s.jsx)(p,{})]},t)}),(0,s.jsx)(u,{})]})}h.displayName=i.VY.displayName}},e=>{var t=t=>e(e.s=t);e.O(0,[965,728,621,928,441,684,358],()=>t(1800)),_N_E=e.O()}]);