(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{4867:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>ep});var a=s(5155),r=s(2115),n=s(7481),i=s(6424),l=s(1754),o=s(3934);function c(e){let{tasks:t,projectName:s,onTaskAdd:r,onTaskUpdate:n,onTaskDelete:c,onTaskHistoryView:d,onTaskStatusUpdate:m}=e;return(0,a.jsxs)("main",{className:"flex-1 flex flex-col p-4 md:p-6 lg:p-8 w-full bg-white rounded-b-lg overflow-hidden",children:[(0,a.jsx)("div",{className:"mb-4",children:(0,a.jsx)(l.e,{projectName:s,onTaskAdd:r})}),(0,a.jsx)(i.F,{className:"flex-1 -mx-4 px-4",children:(0,a.jsx)("div",{className:"space-y-0 pb-4",children:t.length>0?t.map(e=>(0,a.jsx)(o.L,{task:e,onHistoryClick:d,onUpdate:n,onDelete:c,onStatusUpdate:m},e.id)):(0,a.jsxs)("div",{className:"text-center py-16",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-foreground",children:"No tasks yet!"}),(0,a.jsx)("p",{className:"text-muted-foreground mt-1",children:"Add a task above to get started."})]})})})]})}var d=s(4729),m=s(8184),x=s(4165),p=s(6695),u=s(6126),h=s(9434);let f=r.forwardRef((e,t)=>{let{className:s,type:r,...n}=e;return(0,a.jsx)("input",{type:r,className:(0,h.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),ref:t,...n})});f.displayName="Input";var j=s(285),g=s(8603),v=s(5943),N=s(8376),w=s(9968),y=s(7223),b=s(593),k=s(6923),C=s(8718);let A=e=>(0,m.GP)(e,"dd/MM/yy HH:mm"),E=e=>e?"...".concat(e.slice(-4)):null,S=e=>{let t=E(e.taskId);switch(e.type){case"created":return{icon:(0,a.jsx)(g.A,{className:"h-4 w-4 text-green-500"}),title:(0,a.jsxs)("p",{className:"font-medium",children:["Task Created: ",(0,a.jsxs)("span",{className:"font-normal text-muted-foreground",children:['"',e.taskContent,'"']})]}),description:t&&(0,a.jsx)(u.E,{variant:"outline",className:"font-mono",children:t})};case"content":return{icon:(0,a.jsx)(v.A,{className:"h-4 w-4 text-blue-500"}),title:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("p",{className:"font-medium",children:"Task Updated"}),t&&(0,a.jsx)(u.E,{variant:"outline",className:"font-mono",children:t})]}),description:(0,a.jsxs)("p",{className:"text-sm text-muted-foreground break-words whitespace-pre-wrap",children:["Changed from ",(0,a.jsxs)("span",{className:"line-through",children:['"',e.from,'"']})," to ",(0,a.jsxs)("span",{children:['"',e.to,'"']})]})};case"status":return{icon:(0,a.jsx)(N.A,{className:"h-4 w-4 text-purple-500"}),title:(0,a.jsxs)("p",{className:"font-medium",children:["Status Changed for: ",(0,a.jsxs)("span",{className:"font-normal text-muted-foreground",children:['"',e.taskContent,'"']})]}),description:(0,a.jsxs)("div",{className:"flex items-center gap-2 flex-wrap",children:[(0,a.jsx)(u.E,{variant:"outline",children:e.from}),(0,a.jsx)(w.A,{className:"h-4 w-4 text-muted-foreground"}),(0,a.jsx)(u.E,{variant:"outline",children:e.to}),t&&(0,a.jsx)(u.E,{variant:"outline",className:"font-mono",children:t})]})};case"deleted":return{icon:(0,a.jsx)(y.A,{className:"h-4 w-4 text-red-500"}),title:(0,a.jsxs)("p",{className:"font-medium",children:["Task Deleted: ",(0,a.jsxs)("span",{className:"font-normal text-muted-foreground line-through",children:['"',e.taskContent,'"']})]}),description:t&&(0,a.jsx)(u.E,{variant:"outline",className:"font-mono",children:t})};case"reported":return{icon:(0,a.jsx)(b.A,{className:"h-4 w-4 text-gray-500"}),title:(0,a.jsxs)("p",{className:"font-medium",children:["Task Reported: ",(0,a.jsxs)("span",{className:"font-normal text-muted-foreground",children:['"',e.taskContent,'"']})]}),description:t&&(0,a.jsx)(u.E,{variant:"outline",className:"font-mono",children:t})};default:return{icon:null,title:null,description:null}}};function I(e){let{isOpen:t,setIsOpen:s,activity:l=[],onActivityImport:o}=e,{toast:c}=(0,n.dj)(),[d,u]=(0,r.useState)(""),h=(0,r.useRef)(null),g=(0,r.useMemo)(()=>{if(!d)return l;let e=d.toLowerCase();return l.filter(t=>{var s,a,r;let n=A(new Date(t.timestamp)).toLowerCase(),i=t.type.toLowerCase(),l=t.taskContent.toLowerCase(),o=null==(s=t.from)?void 0:s.toLowerCase(),c=null==(a=t.to)?void 0:a.toLowerCase(),d=null==(r=t.taskId)?void 0:r.toLowerCase();return n.includes(e)||i.includes(e)||l.includes(e)||o&&o.includes(e)||c&&c.includes(e)||d&&d.includes(e)})},[d,l]);return(0,a.jsx)(x.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(x.Cf,{className:"max-w-3xl",children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsx)(x.L3,{children:"Global Activity"}),(0,a.jsx)(x.rr,{children:"A log of all activities across the project."})]}),(0,a.jsx)("div",{className:"my-2",children:(0,a.jsx)(f,{placeholder:"Search activity by keyword or date...",value:d,onChange:e=>u(e.target.value)})}),(0,a.jsx)(i.F,{className:"max-h-[60vh] -mx-6 px-6",children:(0,a.jsx)("div",{className:"space-y-4 py-4",children:g.length>0?[...g].sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime()).map(e=>{let{icon:t,title:s,description:r}=S(e);return(0,a.jsx)(p.Zp,{className:"p-4 bg-muted/50",children:(0,a.jsxs)("div",{className:"flex items-start gap-4",children:[(0,a.jsx)("div",{className:"mt-1",children:t}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("div",{className:"flex justify-between items-start",children:[(0,a.jsx)("div",{className:"flex-1",children:s}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground mb-1 ml-4 flex-shrink-0",children:A(new Date(e.timestamp))})]}),r&&(0,a.jsx)("div",{className:"mt-1",children:r})]})]})},e.id)}):(0,a.jsx)("p",{className:"text-sm text-muted-foreground text-center py-12",children:d?"No activity found for your search.":"No activity has been recorded yet."})})}),(0,a.jsxs)(x.Es,{className:"gap-2",children:[(0,a.jsx)("input",{type:"file",accept:".json",ref:h,onChange:e=>{var t;let a=null==(t=e.target.files)?void 0:t[0];if(!a)return;let r=new FileReader;r.onload=e=>{try{var t;let a=null==(t=e.target)?void 0:t.result;if("string"!=typeof a)throw Error("File could not be read.");let r=JSON.parse(a);if(!Array.isArray(r)||!r.every(e=>"id"in e&&"timestamp"in e&&"type"in e&&"taskContent"in e))throw Error("Invalid activity file format. The 'taskId' property might be missing in some entries.");o(r),c({title:"Success",description:"Activity log merged successfully."}),s(!1)}catch(e){console.error("Failed to import activity log:",e),c({title:"Import Failed",description:e instanceof Error?e.message:"An unknown error occurred.",variant:"destructive"})}},r.onerror=()=>{c({title:"Error",description:"Failed to read the file.",variant:"destructive"})},r.readAsText(a),e.target&&(e.target.value="")},className:"hidden"}),(0,a.jsxs)(j.$,{variant:"outline",onClick:()=>{var e;null==(e=h.current)||e.click()},children:[(0,a.jsx)(k.A,{className:"mr-2 h-4 w-4"}),"Importar desde JSON"]}),(0,a.jsxs)(j.$,{variant:"outline",onClick:()=>{if(0===l.length)return;let e="data:application/json;charset=utf-8,"+encodeURIComponent(JSON.stringify([...l].sort((e,t)=>new Date(e.timestamp).getTime()-new Date(t.timestamp).getTime()),null,2)),t="activity_log_".concat((0,m.GP)(new Date,"yyyy-MM-dd"),".json"),s=document.createElement("a");s.setAttribute("href",e),s.setAttribute("download",t),s.click()},disabled:0===l.length,children:[(0,a.jsx)(C.A,{className:"mr-2 h-4 w-4"}),"Exportar como JSON"]})]})]})})}var D=s(968);let T=(0,s(2085).F)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),L=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(D.b,{ref:t,className:(0,h.cn)(T(),s),...r})});L.displayName=D.b.displayName;var P=s(4059),F=s(154);let O=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(P.bL,{className:(0,h.cn)("grid gap-2",s),...r,ref:t})});O.displayName=P.bL.displayName;let z=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(P.q7,{ref:t,className:(0,h.cn)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",s),...r,children:(0,a.jsx)(P.C1,{className:"flex items-center justify-center",children:(0,a.jsx)(F.A,{className:"h-2.5 w-2.5 fill-current text-current"})})})});z.displayName=P.q7.displayName;var R=s(7489);let U=r.forwardRef((e,t)=>{let{className:s,orientation:r="horizontal",decorative:n=!0,...i}=e;return(0,a.jsx)(R.b,{ref:t,decorative:n,orientation:r,className:(0,h.cn)("shrink-0 bg-border","horizontal"===r?"h-[1px] w-full":"h-full w-[1px]",s),...i})});function $(e){let{isOpen:t,setIsOpen:s,settings:n,onSettingsSave:i}=e,[l,o]=(0,r.useState)(n.copyFormat),[c,d]=(0,r.useState)(n.statusColors);(0,r.useEffect)(()=>{t&&(o(n.copyFormat),d(n.statusColors))},[t,n]);let m=(e,t)=>{d(s=>({...s,[e]:t}))};return(0,a.jsx)(x.lG,{open:t,onOpenChange:s,children:(0,a.jsxs)(x.Cf,{className:"max-w-md",children:[(0,a.jsxs)(x.c7,{children:[(0,a.jsx)(x.L3,{children:"Configuraci\xf3n"}),(0,a.jsx)(x.rr,{children:"Personaliza el comportamiento de la aplicaci\xf3n."})]}),(0,a.jsxs)("div",{className:"py-4 space-y-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium",children:"Formato de Copiado de Tareas"}),(0,a.jsxs)(O,{value:l,onValueChange:e=>o(e),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(z,{value:"text",id:"text"}),(0,a.jsx)(L,{htmlFor:"text",children:"Texto plano"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground ml-6",children:"Ideal para pegar en editores simples o donde no se necesita formato."}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(z,{value:"html",id:"html"}),(0,a.jsx)(L,{htmlFor:"html",children:"Texto enriquecido (HTML)"})]}),(0,a.jsx)("p",{className:"text-xs text-muted-foreground ml-6",children:"Mantiene colores y negrita. Ideal para Teams, Word, o Google Docs."})]})]}),(0,a.jsx)(U,{}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("h3",{className:"text-sm font-medium",children:"Colores de Estado para Copiado HTML"}),(0,a.jsx)("div",{className:"space-y-2",children:Object.keys(c).map(e=>(0,a.jsxs)("div",{className:"flex items-center justify-between gap-4",children:[(0,a.jsx)(L,{htmlFor:"color-".concat(e),children:e}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(f,{id:"color-".concat(e),type:"color",value:c[e],onChange:t=>m(e,t.target.value),className:"w-10 h-10 p-1"}),(0,a.jsx)(f,{value:c[e],onChange:t=>m(e,t.target.value),className:"w-24 font-mono text-sm"})]})]},e))})]})]}),(0,a.jsxs)(x.Es,{children:[(0,a.jsx)(j.$,{variant:"outline",onClick:()=>s(!1),children:"Cancelar"}),(0,a.jsx)(j.$,{onClick:()=>{i({copyFormat:l,statusColors:c}),s(!1)},children:"Guardar Cambios"})]})]})})}U.displayName=R.b.displayName;var _=s(4301),H=s(172),M=s(518),q=s(5318),G=s(1887),J=s(8271),V=s(207),Z=s(478),Y=s(2413),B=s(8082);let K=B.Kq,Q=B.bL,W=B.l9,X=r.forwardRef((e,t)=>{let{className:s,sideOffset:r=4,...n}=e;return(0,a.jsx)(B.UC,{ref:t,sideOffset:r,className:(0,h.cn)("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",s),...n})});X.displayName=B.UC.displayName;var ee=s(514),et=s(4838),es=s(2278);let ea=es.bL;es.l9;let er=es.ZL,en=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(es.hJ,{className:(0,h.cn)("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...r,ref:t})});en.displayName=es.hJ.displayName;let ei=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsxs)(er,{children:[(0,a.jsx)(en,{}),(0,a.jsx)(es.UC,{ref:t,className:(0,h.cn)("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...r})]})});ei.displayName=es.UC.displayName;let el=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,h.cn)("flex flex-col space-y-2 text-center sm:text-left",t),...s})};el.displayName="AlertDialogHeader";let eo=e=>{let{className:t,...s}=e;return(0,a.jsx)("div",{className:(0,h.cn)("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s})};eo.displayName="AlertDialogFooter";let ec=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(es.hE,{ref:t,className:(0,h.cn)("text-lg font-semibold",s),...r})});ec.displayName=es.hE.displayName;let ed=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(es.VY,{ref:t,className:(0,h.cn)("text-sm text-muted-foreground",s),...r})});ed.displayName=es.VY.displayName;let em=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(es.rc,{ref:t,className:(0,h.cn)((0,j.r)(),s),...r})});em.displayName=es.rc.displayName;let ex=r.forwardRef((e,t)=>{let{className:s,...r}=e;return(0,a.jsx)(es.ZD,{ref:t,className:(0,h.cn)((0,j.r)({variant:"outline"}),"mt-2 sm:mt-0",s),...r})});function ep(){let{toast:e}=(0,n.dj)(),[t,s]=(0,r.useState)(null),[i,l]=(0,r.useState)(!1),[o,m]=(0,r.useState)(""),[x,p]=(0,r.useState)(null),[u,h]=(0,r.useState)(!1),[g,v]=(0,r.useState)(!1),[N,w]=(0,r.useState)(!1),[k,C]=(0,r.useState)(!1),[A,E]=(0,r.useState)(!1),[S,D]=(0,r.useState)("");(0,r.useEffect)(()=>{s((0,ee.Y2)());let e=e=>{"app-data"===e.key&&s((0,ee.Y2)())};return window.addEventListener("storage",e),()=>{window.removeEventListener("storage",e)}},[]);let T=null==t?void 0:t.projects.find(e=>e.id===t.activeProjectId);(0,r.useEffect)(()=>{T&&m(T.name)},[T]);let L=e=>{s(e),(0,ee.ZL)(e)},P=(e,s,a,r,n,i)=>{if(!T||!t)return;let l={id:"act-".concat(Date.now()),taskId:s,timestamp:new Date,type:a,taskContent:r,from:n,to:i},o=e.map(e=>e.id===t.activeProjectId?{...e,activity:[l,...e.activity]}:e);L({...t,projects:o})},F=e=>{if(!T||!t)return;let s=t.projects.map(s=>s.id===t.activeProjectId?{...s,tasks:e}:s);return L({...t,projects:s}),s},O=()=>{if(o.trim()&&T&&t){let e=o.trim(),s=t.projects.map(s=>s.id===t.activeProjectId?{...s,name:e}:s);L({...t,projects:s})}l(!1)},z=(e,t)=>{let s=e.map(e=>"".concat("Listo"===e.status?"[x]":"[ ]"," ").concat(e.content," -> ").concat(e.status.toUpperCase())).join("\n"),a="".concat(t,"\n\n").concat(s);return navigator.clipboard.writeText(a)},R=(e,t,s)=>{let{statusColors:a}=s,r=e.map(e=>{let t="Listo"===e.status?"<b>[x]</b>":"[ ]",s=e.content,r='<b style="color: '.concat(a[e.status],';">').concat(e.status.toUpperCase(),"</b>");return"<p>".concat(t," ").concat(s," -&gt; ").concat(r,"</p>")}).join(""),n=new ClipboardItem({"text/html":new Blob(["\n      <div>\n        <p><b>".concat(t,"</b></p>\n        ").concat(r,"\n      </div>\n    ")],{type:"text/html"})});return navigator.clipboard.write([n])},U=()=>{if(!t)return;let s={id:"project-".concat(Date.now()),name:"Project ".concat(t.projects.length+1),tasks:[],activity:[]};L({...t,projects:[...t.projects,s],activeProjectId:s.id}),l(!0),m(s.name),e({title:'Project "'.concat(s.name,'" created')})},B=s=>{if(t&&s!==t.activeProjectId){var a;L({...t,activeProjectId:s}),e({title:'Switched to project "'.concat(null==(a=t.projects.find(e=>e.id===s))?void 0:a.name,'"')})}};return t&&T?(0,a.jsxs)("div",{className:"bg-neutral-950 min-h-screen flex flex-col items-center py-8",children:[(0,a.jsxs)("div",{className:"w-full max-w-4xl bg-white rounded-lg shadow-2xl flex flex-col h-[calc(100vh-4rem)]",children:[(0,a.jsx)("header",{className:"w-full flex items-center justify-between p-4 md:p-6 lg:p-8 border-b",children:i?(0,a.jsxs)("div",{className:"flex items-center gap-2 w-full",children:[(0,a.jsx)(f,{value:o,onChange:e=>m(e.target.value),onKeyDown:e=>{"Enter"===e.key&&O(),"Escape"===e.key&&(m((null==T?void 0:T.name)||""),l(!1))},className:"text-3xl font-bold tracking-tight h-auto p-0 border-none focus-visible:ring-0",autoFocus:!0,onFocus:e=>e.currentTarget.select()}),(0,a.jsx)(j.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:O,children:(0,a.jsx)(M.A,{className:"h-5 w-5"})}),(0,a.jsx)(j.$,{variant:"ghost",size:"icon",className:"h-8 w-8",onClick:()=>{m(T.name),l(!1)},children:(0,a.jsx)(q.A,{className:"h-5 w-5"})})]}):(0,a.jsxs)("div",{className:"flex items-center justify-between w-full",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold tracking-tight text-foreground cursor-pointer",onClick:()=>{m(T.name),l(!0)},children:T.name}),(0,a.jsxs)(et.rI,{children:[(0,a.jsx)(et.ty,{asChild:!0,children:(0,a.jsx)(j.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(G.A,{className:"h-4 w-4"})})}),(0,a.jsxs)(et.SQ,{align:"start",children:[t.projects.map(e=>(0,a.jsxs)(et._2,{onSelect:()=>B(e.id),children:[e.name,e.id===t.activeProjectId&&(0,a.jsx)(M.A,{className:"ml-auto h-4 w-4"})]},e.id)),(0,a.jsx)(et.mB,{}),(0,a.jsxs)(et._2,{onSelect:U,children:[(0,a.jsx)(_.A,{className:"mr-2 h-4 w-4"}),"A\xf1adir nuevo proyecto"]}),(0,a.jsx)(et.mB,{}),(0,a.jsxs)(et._2,{onSelect:()=>E(!0),className:"text-destructive focus:bg-destructive/10 focus:text-destructive",disabled:t.projects.length<=1,children:[(0,a.jsx)(y.A,{className:"mr-2 h-4 w-4"}),"Eliminar proyecto"]})]})]})]}),(0,a.jsx)(K,{children:(0,a.jsxs)("div",{className:"flex items-center gap-1",children:[(0,a.jsxs)(Q,{children:[(0,a.jsx)(W,{asChild:!0,children:(0,a.jsxs)(j.$,{variant:"ghost",size:"icon",onClick:()=>w(!0),children:[(0,a.jsx)(J.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Configuraci\xf3n"})]})}),(0,a.jsx)(X,{children:(0,a.jsx)("p",{children:"Configuraci\xf3n"})})]}),(0,a.jsxs)(Q,{children:[(0,a.jsx)(W,{asChild:!0,children:(0,a.jsxs)(j.$,{variant:"ghost",size:"icon",onClick:()=>v(!0),children:[(0,a.jsx)(V.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Ver actividad general"})]})}),(0,a.jsx)(X,{children:(0,a.jsx)("p",{children:"Ver actividad general"})})]}),(0,a.jsxs)(Q,{children:[(0,a.jsx)(W,{asChild:!0,children:(0,a.jsxs)(j.$,{variant:"ghost",size:"icon",onClick:()=>{if(!t||!T||0===T.tasks.length)return void e({title:"No hay tareas para copiar",description:"A\xf1ade algunas tareas antes de copiar."});let s={Listo:1,"En proceso":2,Pendiente:3},a=[...T.tasks].sort((e,t)=>s[e.status]-s[t.status]);("html"===t.settings.copyFormat?R(a,T.name,t.settings):z(a,T.name)).then(()=>{e({title:"Tareas copiadas",description:"La lista de tareas ha sido copiada al portapapeles."})}).catch(t=>{console.error("Failed to copy tasks: ",t),e({title:"Error",description:"No se pudieron copiar las tareas.",variant:"destructive"})})},children:[(0,a.jsx)(Z.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Copiar tareas"})]})}),(0,a.jsx)(X,{children:(0,a.jsx)("p",{children:"Copiar lista de tareas"})})]}),(0,a.jsxs)(Q,{children:[(0,a.jsx)(W,{asChild:!0,children:(0,a.jsxs)(j.$,{variant:"ghost",size:"icon",onClick:()=>C(!0),children:[(0,a.jsx)(b.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Informar tareas"})]})}),(0,a.jsx)(X,{children:(0,a.jsx)("p",{children:"Informar tareas (eliminar las completadas)"})})]}),(0,a.jsxs)(Q,{children:[(0,a.jsx)(W,{asChild:!0,children:(0,a.jsxs)(j.$,{variant:"ghost",size:"icon",onClick:()=>{let e=(0,ee.vH)(),t=(window.screen.height-400)/2,s=(window.screen.width-600)/2;switch(e){case"top-left":t=0,s=0;break;case"top-right":t=0,s=window.screen.width-600;break;case"bottom-left":t=window.screen.height-400,s=0;break;case"bottom-right":t=window.screen.height-400,s=window.screen.width-600}window.open("/popout","task-popout","width=".concat(600,",height=").concat(400,",top=").concat(t,",left=").concat(s))},children:[(0,a.jsx)(Y.A,{className:"h-5 w-5"}),(0,a.jsx)("span",{className:"sr-only",children:"Open in new window"})]})}),(0,a.jsx)(X,{children:(0,a.jsx)("p",{children:"Abrir en nueva ventana"})})]})]})})]})}),(0,a.jsx)(c,{tasks:T.tasks,projectName:T.name,onTaskAdd:t=>{if(""===t.trim()||!T)return;let s={id:"task-".concat(Date.now()),content:t,createdAt:new Date,modifications:[],status:"Pendiente"};P(F([s,...T.tasks]),s.id,"created",t),e({title:"Task Added"})},onTaskUpdate:(s,a)=>{if(!T)return;let r="",n=F(T.tasks.map(e=>{if(e.id===s){if(e.content===a)return e;r=e.content;let t={id:"mod-".concat(Date.now()),taskId:s,timestamp:new Date,type:"content",from:e.content,to:a};return{...e,content:a,modifications:[t,...e.modifications]}}return e}));r&&t&&P(n,s,"content",a,r,a),e({title:"Task Updated"})},onTaskDelete:s=>{if(!T)return;let a=T.tasks.find(e=>e.id===s);if(!a)return;let r=F(T.tasks.filter(e=>e.id!==s));t&&P(r,s,"deleted",a.content),e({title:"Task Deleted"})},onTaskHistoryView:e=>{p(e),h(!0)},onTaskStatusUpdate:(s,a)=>{let r;if(!T)return;let n="",i=F(T.tasks.map(e=>{if(e.id===s&&e.status!==a){n=e.content,r=e.status;let t={id:"mod-".concat(Date.now()),taskId:s,timestamp:new Date,type:"status",from:e.status,to:a};return{...e,status:a,modifications:[t,...e.modifications]}}return e}));r&&t&&P(i,s,"status",n,r,a),e({title:"Task Status Updated"})}})]}),(0,a.jsx)(d.R,{isOpen:u,setIsOpen:h,task:x}),(0,a.jsx)(I,{isOpen:g,setIsOpen:v,activity:T.activity,onActivityImport:e=>{if(!T||!t)return;let s=e.map(e=>({...e,timestamp:new Date(e.timestamp)})),a=new Set(T.activity.map(e=>e.id)),r=[...T.activity];s.forEach(e=>{a.has(e.id)||r.push(e)}),r.sort((e,t)=>new Date(t.timestamp).getTime()-new Date(e.timestamp).getTime());let n=t.projects.map(e=>e.id===t.activeProjectId?{...e,activity:r}:e);L({...t,projects:n})}}),(0,a.jsx)($,{isOpen:N,setIsOpen:w,settings:t.settings,onSettingsSave:s=>{t&&(L({...t,settings:s}),e({title:"Settings saved"}))}}),(0,a.jsx)(ea,{open:k,onOpenChange:C,children:(0,a.jsxs)(ei,{children:[(0,a.jsxs)(el,{children:[(0,a.jsx)(ec,{children:"\xbfEst\xe1 seguro?"}),(0,a.jsx)(ed,{children:'Esta acci\xf3n eliminar\xe1 permanentemente todas las tareas marcadas como "Listo". Desapareceran las tareas terminadas de la lista.'})]}),(0,a.jsxs)(eo,{children:[(0,a.jsx)(ex,{children:"Cancelar"}),(0,a.jsx)(em,{onClick:()=>{if(!T||!t)return;let s=T.tasks.filter(e=>"Listo"===e.status);if(0===s.length){e({title:"Sin tareas completadas",description:'No hay tareas "Listo" para eliminar.'}),C(!1);return}let a=T.tasks.filter(e=>"Listo"!==e.status),r=s.map(e=>({id:"act-".concat(Date.now(),"-").concat(e.id),taskId:e.id,timestamp:new Date,type:"reported",taskContent:e.content})),n=t.projects.map(e=>e.id===t.activeProjectId?{...e,tasks:a,activity:[...r,...e.activity]}:e);L({...t,projects:n}),e({title:"Tareas informadas",description:"".concat(s.length," tarea(s) completada(s) ha(n) sido archivada(s).")}),C(!1)},children:"Confirmar"})]})]})}),(0,a.jsx)(ea,{open:A,onOpenChange:E,children:(0,a.jsxs)(ei,{children:[(0,a.jsxs)(el,{children:[(0,a.jsxs)(ec,{children:['\xbfEst\xe1 seguro que quiere eliminar el proyecto "',T.name,'"?']}),(0,a.jsxs)(ed,{children:["Esta acci\xf3n no se puede deshacer. Se borrar\xe1n permanentemente el proyecto y todas sus tareas y actividades asociadas.",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"Por favor, escriba ",(0,a.jsx)("strong",{children:"delete"})," para confirmar."]})]}),(0,a.jsx)(f,{value:S,onChange:e=>D(e.target.value),placeholder:"delete",className:"my-2"}),(0,a.jsxs)(eo,{children:[(0,a.jsx)(ex,{onClick:()=>D(""),children:"Cancelar"}),(0,a.jsx)(em,{onClick:()=>{if(!t||!T)return;let s=t.projects.filter(e=>e.id!==t.activeProjectId),a=s.length>0?s[0].id:null;L({projects:s,activeProjectId:a,settings:t.settings}),e({title:'Project "'.concat(T.name,'" deleted')}),E(!1),D("")},disabled:"delete"!==S.toLowerCase(),className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:"Eliminar proyecto"})]})]})})]}):(0,a.jsx)("div",{className:"bg-neutral-950 min-h-screen flex flex-col items-center justify-center text-white",children:t&&0===t.projects.length?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h1",{className:"text-2xl font-bold",children:"No project found"}),(0,a.jsx)("p",{className:"mt-4",children:"Please create a new project to get started."}),(0,a.jsxs)(j.$,{onClick:U,className:"mt-6",children:[(0,a.jsx)(_.A,{className:"mr-2 h-4 w-4"}),"Create New Project"]})]}):(0,a.jsxs)("div",{className:"flex items-center gap-2 text-muted-foreground",children:[(0,a.jsx)(H.A,{className:"h-5 w-5 animate-spin"}),(0,a.jsx)("span",{children:"Loading projects..."})]})})}ex.displayName=es.ZD.displayName},8439:(e,t,s)=>{Promise.resolve().then(s.bind(s,4867))}},e=>{var t=t=>e(e.s=t);e.O(0,[965,728,579,928,441,684,358],()=>t(8439)),_N_E=e.O()}]);